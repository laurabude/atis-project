<div class="input-box">
  <label>Observation time </label>
  <input [(ngModel)]="formAtisFields['obstime'].value" readonly />
</div>
<div class="grid">
  <div class="grid-item">
    <label>Active runway</label>
    <div class="select-box">
      <select
        name="mlr"
        [ngClass]="{
          greyDropdown: lastValue['mlr'] == formAtisFields['mlr'].value
        }"
        [(ngModel)]="formAtisFields['mlr'].value"
        (ngModelChange)="onInputChange($event, 'mlr')"
        [disabled]="readonlyMode"
        [ngClass]="{ 'readonly-select': readonlyMode }"
      >
        <option></option>
        <option>07</option>
        <option>10</option>
        <option>14</option>
        <option>25</option>
        <option>28</option>
        <option>32</option>
      </select>
    </div>
  </div>
  <div class="grid-item">
    <label>Type of Approach</label>
    <div class="select-box">
      <select
        [(ngModel)]="formAtisFields['apptype'].value"
        (ngModelChange)="onInputChange($event, 'apptype')"
        [ngClass]="{
          greyDropdown: lastValue['apptype'] == formAtisFields['apptype'].value
        }"
        [disabled]="readonlyMode"
        [ngClass]="{ 'readonly-select': readonlyMode }"
      >
        <option></option>
        <option>ILS</option>
        <option>VOR</option>
        <option>NDB</option>
      </select>
    </div>
  </div>
  <div class="grid-item">
    <label>Holding delay</label>
    <input
      [(ngModel)]="formAtisFields['holding'].value"
      name="holding"
      #holding="ngModel"
      type="text"
      [style.background]="
        !holding.dirty || (lastValue['holding'] == null && holding.value == '')
          ? 'white'
          : lastValue['holding'] == holding.value
          ? '#707070'
          : isChanged['holding']
          ? '#000080'
          : '#DC143C'
      "
      [style.caret-color]="
        !holding.dirty || (lastValue['holding'] == null && holding.value == '')
          ? 'black'
          : 'white'
      "
      [readonly]="readonlyMode"
      [class.readonly-input]="readonlyMode"
      (keyup)="onInputChange($event)"
    />
  </div>
  <div class="grid-item">
    <label>Transition Level</label>
    <input
      [(ngModel)]="formAtisFields['tl'].value"
      name="tl"
      type="text"
      #tl="ngModel"
      [style.background]="
        !tl.dirty || (lastValue['tl'] == null && tl.value == '')
          ? 'white'
          : lastValue['tl'] == tl.value
          ? '#707070'
          : isChanged['tl']
          ? '#000080'
          : '#DC143C'
      "
      [style.caret-color]="
        !tl.dirty || (lastValue['tl'] == null && tl.value == '')
          ? 'black'
          : 'white'
      "
      [readonly]="readonlyMode"
      [class.readonly-input]="readonlyMode"
      (keyup)="onInputChange($event)"
    />
  </div>
  <div class="grid-item">
    <label>Wind direction</label>
    <input
      [(ngModel)]="formAtisFields['mlr.wind.dir'].value"
      type="text"
      name="mlr.wind.dir"
      #winddir="ngModel"
      [style.background]="
        !winddir.dirty ||
        (lastValue['mlr.wind.dir'] == null && winddir.value == '')
          ? 'white'
          : lastValue['mlr.wind.dir'] == winddir.value
          ? '#707070'
          : isChanged['mlr.wind.dir']
          ? '#000080'
          : '#DC143C'
      "
      [style.caret-color]="
        !winddir.dirty ||
        (lastValue['mlr.wind.dir'] == null && winddir.value == '')
          ? 'black'
          : 'white'
      "
      [readonly]="readonlyMode"
      [class.readonly-input]="readonlyMode"
      (keyup)="onInputChange($event)"
    />
  </div>
  <div class="grid-item">
    <label>Varying between</label>
    <div class="extended-input">
      <input
        [(ngModel)]="formAtisFields['mlr.wind.var.min'].value"
        name="mlr.wind.var.min"
        type="text"
        #windvarmin="ngModel"
        [style.background]="
          !windvarmin.dirty ||
          (lastValue['mlr.wind.var.min'] == null && windvarmin.value == '')
            ? 'white'
            : lastValue['mlr.wind.var.min'] == windvarmin.value
            ? '#707070'
            : isChanged['mlr.wind.var.min']
            ? '#000080'
            : '#DC143C'
        "
        [style.caret-color]="
          !windvarmin.dirty ||
          (lastValue['mlr.wind.var.min'] == null && windvarmin.value == '')
            ? 'black'
            : 'white'
        "
        [readonly]="readonlyMode"
        [class.readonly-input]="readonlyMode"
        (keyup)="onInputChange($event)"
      />
      <label class="and">and</label>
      <input
        [(ngModel)]="formAtisFields['mlr.wind.var.max'].value"
        type="text"
        #windvarmax="ngModel"
        name="mlr.wind.var.max"
        [style.background]="
          !windvarmax.dirty ||
          (lastValue['mlr.wind.var.max'] == null && windvarmax.value == '')
            ? 'white'
            : lastValue['mlr.wind.var.max'] == windvarmax.value
            ? '#707070'
            : isChanged['mlr.wind.var.max']
            ? '#000080'
            : '#DC143C'
        "
        [style.caret-color]="
          !windvarmax.dirty ||
          (lastValue['mlr.wind.var.max'] == null && windvarmax.value == '')
            ? 'black'
            : 'white'
        "
        [readonly]="readonlyMode"
        [class.readonly-input]="readonlyMode"
        (keyup)="onInputChange($event)"
      />
    </div>
  </div>
  <div class="grid-item">
    <label>Wind speed</label>
    <div class="extended-input">
      <input
        [(ngModel)]="formAtisFields['mlr.wind.speed'].value"
        name="mlr.wind.speed"
        #windspeed="ngModel"
        type="text"
        [style.background]="
          !windspeed.dirty ||
          (lastValue['mlr.wind.speed'] == null && windspeed.value == '')
            ? 'white'
            : lastValue['mlr.wind.speed'] == windspeed.value
            ? '#707070'
            : isChanged['mlr.wind.speed']
            ? '#000080'
            : '#DC143C'
        "
        [style.caret-color]="
          !windspeed.dirty ||
          (lastValue['mlr.wind.speed'] == null && windspeed.value == '')
            ? 'black'
            : 'white'
        "
        [readonly]="readonlyMode"
        [class.readonly-input]="readonlyMode"
        (keyup)="onInputChange($event)"
      />
      <label>kt</label>
    </div>
  </div>
  <div class="grid-item">
    <label>Gusting To</label>
    <div class="extended-input">
      <input
        [(ngModel)]="formAtisFields['mlr.wind.gusts'].value"
        name="mlr.wind.gusts"
        #windgusts="ngModel"
        type="text"
        [style.background]="
          !windgusts.dirty ||
          (lastValue['mlr.wind.gusts'] == null && windgusts.value == '')
            ? 'white'
            : lastValue['mlr.wind.gusts'] == windgusts.value
            ? '#707070'
            : isChanged['mlr.wind.gusts']
            ? '#000080'
            : '#DC143C'
        "
        [style.caret-color]="
          !windgusts.dirty ||
          (lastValue['mlr.wind.gusts'] == null && windgusts.value == '')
            ? 'black'
            : 'white'
        "
        [readonly]="readonlyMode"
        [class.readonly-input]="readonlyMode"
        (keyup)="onInputChange($event)"
      />

      <label>kt</label>
    </div>
  </div>
</div>
<div class="input-box">
  <label>Visibility</label>
  <input
    [(ngModel)]="formAtisFields['visibility'].value"
    name="visibility"
    #visibility="ngModel"
    type="text"
    [style.background]="
      !visibility.dirty ||
      (lastValue['visibility'] == null && visibility.value == '')
        ? 'white'
        : lastValue['visibility'] == visibility.value
        ? '#707070'
        : isChanged['visibility']
        ? '#000080'
        : '#DC143C'
    "
    [style.caret-color]="
      !visibility.dirty ||
      (lastValue['visibility'] == null && visibility.value == '')
        ? 'black'
        : 'white'
    "
    [readonly]="readonlyMode"
    [class.readonly-input]="readonlyMode"
    (keyup)="onInputChange($event)"
  />
</div>
<div class="input-box">
  <label>RVR</label>
  <input
    [(ngModel)]="formAtisFields['rvr'].value"
    name="rvr"
    #rvr="ngModel"
    type="text"
    [style.background]="
      !rvr.dirty || (lastValue['rvr'] == null && rvr.value == '')
        ? 'white'
        : lastValue['rvr'] == rvr.value
        ? '#707070'
        : isChanged['rvr']
        ? '#000080'
        : '#DC143C'
    "
    [style.caret-color]="
      !rvr.dirty || (lastValue['rvr'] == null && rvr.value == '')
        ? 'black'
        : 'white'
    "
    [readonly]="readonlyMode"
    [class.readonly-input]="readonlyMode"
    (keyup)="onInputChange($event)"
  />
</div>
<div class="input-box">
  <label>Present weather</label>
  <input
    [(ngModel)]="formAtisFields['presentweather'].value"
    name="presentweather"
    #presentweather="ngModel"
    type="text"
    [style.background]="
      !presentweather.dirty ||
      (lastValue['presentweather'] == null && presentweather.value == '')
        ? 'white'
        : lastValue['presentweather'] == presentweather.value
        ? '#707070'
        : isChanged['presentweather']
        ? '#000080'
        : '#DC143C'
    "
    [style.caret-color]="
      !presentweather.dirty ||
      (lastValue['presentweather'] == null && presentweather.value == '')
        ? 'black'
        : 'white'
    "
    [readonly]="readonlyMode"
    [class.readonly-input]="readonlyMode"
    (keyup)="onInputChange($event)"
  />
</div>
<div class="input-box">
  <label> Clouds</label>
  <input
    [(ngModel)]="formAtisFields['clouds'].value"
    name="clouds"
    #clouds="ngModel"
    type="text"
    [style.background]="
      !clouds.dirty || (lastValue['clouds'] == null && clouds.value == '')
        ? 'white'
        : lastValue['clouds'] == clouds.value
        ? '#707070'
        : isChanged['clouds']
        ? '#000080'
        : '#DC143C'
    "
    [style.caret-color]="
      !clouds.dirty || (lastValue['clouds'] == null && clouds.value == '')
        ? 'black'
        : 'white'
    "
    [readonly]="readonlyMode"
    [class.readonly-input]="readonlyMode"
    (keyup)="onInputChange($event)"
  />
</div>
<div class="temperature-related-grid">
  <div class="temp-grid-item-1">
    <label>Temperature</label>
    <input
      [(ngModel)]="formAtisFields['temperature'].value"
      name="temperature"
      #temperature="ngModel"
      type="text"
      [style.background]="
        !temperature.dirty ||
        (lastValue['temperature'] == null && temperature.value == '')
          ? 'white'
          : lastValue['temperature'] == temperature.value
          ? '#707070'
          : isChanged['temperature']
          ? '#000080'
          : '#DC143C'
      "
      [style.caret-color]="
        !temperature.dirty ||
        (lastValue['temperature'] == null && temperature.value == '')
          ? 'black'
          : 'white'
      "
      [readonly]="readonlyMode"
      [class.readonly-input]="readonlyMode"
      (keyup)="onInputChange($event)"
    />
  </div>
  <div class="temp-grid-item-2">
    <label>Dewpoint</label>
    <input
      [(ngModel)]="formAtisFields['dewpoint'].value"
      name="dewpoint"
      #dewpoint="ngModel"
      type="text"
      [style.background]="
        !dewpoint.dirty ||
        (lastValue['dewpoint'] == null && dewpoint.value == '')
          ? 'white'
          : lastValue['dewpoint'] == dewpoint.value
          ? '#707070'
          : isChanged['dewpoint']
          ? '#000080'
          : '#DC143C'
      "
      [style.caret-color]="
        !dewpoint.dirty ||
        (lastValue['dewpoint'] == null && dewpoint.value == '')
          ? 'black'
          : 'white'
      "
      [readonly]="readonlyMode"
      [class.readonly-input]="readonlyMode"
      (keyup)="onInputChange($event)"
    />
  </div>
  <div class="temp-grid-item-3">
    <label>QNH</label>
    <input
      [(ngModel)]="formAtisFields['pressure'].value"
      name="pressure"
      #pressure="ngModel"
      type="text"
      [style.background]="
        !pressure.dirty ||
        (lastValue['pressure'] == null && pressure.value == '')
          ? 'white'
          : lastValue['pressure'] == pressure.value
          ? '#707070'
          : isChanged['pressure']
          ? '#000080'
          : '#DC143C'
      "
      [style.caret-color]="
        !pressure.dirty ||
        (lastValue['pressure'] == null && pressure.value == '')
          ? 'black'
          : 'white'
      "
      [readonly]="readonlyMode"
      [class.readonly-input]="readonlyMode"
      (keyup)="onInputChange($event)"
    />
  </div>
  <div class="temp-grid-item-4">
    <label>QFE</label>
    <input
      [(ngModel)]="formAtisFields['qfe'].value"
      name="qfe"
      #qfe="ngModel"
      type="text"
      [style.background]="
        !qfe.dirty || (lastValue['qfe'] == null && qfe.value == '')
          ? 'white'
          : lastValue['qfe'] == qfe.value
          ? '#707070'
          : isChanged['qfe']
          ? '#000080'
          : '#DC143C'
      "
      [style.caret-color]="
        !qfe.dirty || (lastValue['qfe'] == null && qfe.value == '')
          ? 'black'
          : 'white'
      "
      [readonly]="readonlyMode"
      [class.readonly-input]="readonlyMode"
      (keyup)="onInputChange($event)"
    />
  </div>
</div>

<div class="input-box textbox">
  <label>Freetext</label>
  <textarea
    [(ngModel)]="formAtisFields['freetext'].value"
    name="freetext"
    #freetext="ngModel"
    [style.background]="
      !freetext.dirty || (lastValue['freetext'] == null && freetext.value == '')
        ? 'white'
        : lastValue['freetext'] == freetext.value
        ? '#707070'
        : isChanged['freetext']
        ? '#000080'
        : '#DC143C'
    "
    [style.caret-color]="
      !freetext.dirty || (lastValue['freetext'] == null && freetext.value == '')
        ? 'black'
        : 'white'
    "
    [readonly]="readonlyMode"
    [class.readonly-input]="readonlyMode"
    (keyup)="onInputChange($event)"
  ></textarea>
</div>
<div class="input-box" id="select-div">
  <label>Fixedtext</label>
  <div class="select-box" [ngClass]="{ selected: isOptionSelected }">
    <select
      [(ngModel)]="formAtisFields['fixedtext'].value"
      [ngClass]="{ selected: isOptionSelected }"
      [ngClass]="{
        greyDropdown:
          lastValue['fixedtext'] == formAtisFields['fixedtext'].value
      }"
      (ngModelChange)="onInputChange($event, 'fixedtext')"
      [disabled]="readonlyMode"
      [ngClass]="{ 'readonly-select': readonlyMode }"
    >
      <option hidden>Runway</option>
      <option>INITIAL CLEARED ALTITUDE 4000 FEET</option>
      <option>GROUND FREQUENCY 132.60</option>
      <option>BIRD ACTIVITY NORTHEAST OF THRESHOLD RWY11</option>
    </select>
  </div>
</div>
<div class="broadcast-mode-buttons">
  <label>Broadcast mode</label>
  <br />
  <button (click)="manualMode()">Manual</button>
  <button (click)="semiAutoMode()">SemiAuto</button>
  <button (click)="autoMode()">Auto</button>
  <button
    class="broadcast"
    (click)="sendBroadcastMessage()"
    [disabled]="isBroadcastBtnDisabled"
    [ngClass]="{ 'disabled-button': isBroadcastBtnDisabled }"
  >
    Broadcast
  </button>
</div>
